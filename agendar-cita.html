<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Agendamiento - Cl√≠nica M√©dica</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Helvetica Neue', sans-serif;
            background: linear-gradient(135deg, #f0f8f0 0%, #e8f5e8 100%);
            min-height: 100vh;
            padding: 20px 15px;
            color: #333;
        }

        .home-button {
            position: fixed;
            top: 15px;
            right: 15px;
            background: #2d6a4f;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(45, 106, 79, 0.3);
            z-index: 999;
            text-decoration: none;
            display: inline-block;
            font-size: 0.85rem;
        }

        .home-button:hover {
            background: #1b4332;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 106, 79, 0.4);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: #ffffff;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(45, 106, 79, 0.15);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2d6a4f 0%, #1b4332 100%);
            color: white;
            padding: 40px 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            right: -100px;
            width: 300px;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
        }

        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 8px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .content {
            padding: 30px 20px;
        }

        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            gap: 10px;
            flex-wrap: wrap;
        }

        .step {
            flex: 1;
            min-width: 80px;
            text-align: center;
            padding: 12px 10px;
            border-radius: 8px;
            background: #f5f5f5;
            font-weight: 600;
            color: #888;
            transition: all 0.3s ease;
            border: 2px solid #ddd;
            font-size: 0.75rem;
        }

        .step.active {
            background: linear-gradient(135deg, #2d6a4f 0%, #1b4332 100%);
            color: white;
            border-color: #2d6a4f;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(45, 106, 79, 0.3);
        }

        .step.completed {
            background: #52b788;
            color: white;
            border-color: #52b788;
        }

        .form-section {
            display: none;
        }

        .form-section.visible {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 1.6rem;
            color: #2d6a4f;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 700;
        }

        /* ===== GRID PARA ESPECIALIDADES ===== */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
        }

        /* ===== CARD ESPECIALIDAD ===== */
        .card {
            padding: 20px 15px;
            border: 2px solid #d4d4d4;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .card:hover {
            border-color: #2d6a4f;
            box-shadow: 0 8px 20px rgba(45, 106, 79, 0.15);
            transform: translateY(-3px);
        }

        .card.selected {
            background: #e8f5e9;
            border-color: #2d6a4f;
            border-width: 3px;
            box-shadow: 0 8px 25px rgba(45, 106, 79, 0.2);
        }

        .card-icon {
            font-size: 2.2rem;
            margin-bottom: 8px;
            display: block;
        }

        .card-title {
            font-weight: 700;
            color: #333;
            font-size: 0.85rem;
            line-height: 1.3;
        }

        /* ===== GRID PARA DOCTORES ===== */
        .doctors-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 25px;
            width: 100%;
        }

        /* ===== DOCTOR CARD PROFESIONAL ===== */
        .doctor-card {
            padding: 0;
            border: 1px solid #d4d4d4;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            display: flex;
            flex-direction: column;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
            min-height: auto;
        }

        .doctor-card:hover {
            border-color: #2d6a4f;
            box-shadow: 0 8px 25px rgba(45, 106, 79, 0.2);
            transform: translateY(-5px);
        }

        .doctor-card.selected {
            background: #e8f5e9;
            border-color: #2d6a4f;
            border-width: 2px;
            box-shadow: 0 8px 30px rgba(45, 106, 79, 0.25);
        }

        .doctor-header {
            background: linear-gradient(135deg, #2d6a4f 0%, #1b4332 100%);
            color: white;
            padding: 20px 15px;
            position: relative;
        }

        .doctor-avatar {
            font-size: 2.8rem;
            margin-bottom: 10px;
            display: block;
        }

        .doctor-name {
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }

        .doctor-title {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            margin-bottom: 3px;
        }

        .doctor-body {
            padding: 15px 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .doctor-specialty {
            font-size: 0.9rem;
            color: #2d6a4f;
            margin-bottom: 10px;
            font-weight: 600;
            padding: 6px;
            background: #e8f5e9;
            border-radius: 6px;
        }

        .doctor-info {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 10px;
        }

        .info-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 0.8rem;
            color: #555;
        }

        .info-icon {
            font-size: 0.9rem;
        }

        .doctor-rating {
            color: #d4a574;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .doctor-badge {
            display: inline-block;
            background: #52b788;
            color: white;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin: 0 4px 8px 0;
        }

        .doctor-availability {
            font-size: 0.8rem;
            color: #52b788;
            font-weight: 600;
            margin-top: auto;
            padding-top: 10px;
            border-top: 1px solid #e0e0e0;
        }

        /* ===== FORMULARIO ===== */
        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d6a4f;
            font-size: 0.95rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 14px;
            border: 2px solid #d4d4d4;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s ease;
            background: white;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2d6a4f;
            box-shadow: 0 0 0 3px rgba(45, 106, 79, 0.1);
            background: #f9fdf9;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr;
            gap: 18px;
        }

        /* ===== RESUMEN ===== */
        .summary {
            background: linear-gradient(135deg, #f9fdf9 0%, #f0f8f0 100%);
            padding: 20px;
            border-radius: 12px;
            border-left: 5px solid #2d6a4f;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 0.9rem;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 700;
            color: #2d6a4f;
        }

        .summary-value {
            color: #333;
            text-align: right;
            margin-left: 10px;
        }

        /* ===== BOTONES ===== */
        .buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 130px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #2d6a4f 0%, #1b4332 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(45, 106, 79, 0.3);
            flex: 1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(45, 106, 79, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: #c8e6c9;
            color: #1b4332;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            flex: 1;
        }

        .btn-secondary:hover {
            background: #a5d6a7;
            transform: translateY(-2px);
        }

        .btn-success {
            background: linear-gradient(135deg, #52b788 0%, #2d6a4f 100%);
            color: white;
            box-shadow: 0 4px 12px rgba(82, 183, 136, 0.3);
            flex: 1;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 18px rgba(82, 183, 136, 0.4);
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(27, 67, 50, 0.6);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px 25px;
            border-radius: 16px;
            max-width: 100%;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.4s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-content h2 {
            color: #2d6a4f;
            margin-bottom: 15px;
            font-size: 1.6rem;
            font-weight: 700;
        }

        .modal-content p {
            color: #555;
            margin-bottom: 10px;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .success-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .modal-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            justify-content: center;
            margin-top: 25px;
        }

        .modal-buttons button {
            width: 100%;
            min-width: unset;
        }

        /* ===== RESPONSIVE BREAKPOINTS ===== */
        @media (max-width: 600px) {
            body {
                padding: 15px 10px;
            }

            .home-button {
                position: fixed;
                top: 12px;
                right: 12px;
                padding: 8px 14px;
                font-size: 0.75rem;
            }

            .container {
                max-width: 100%;
                margin: 0 auto;
                border-radius: 12px;
            }

            .header {
                padding: 30px 20px;
            }

            .header h1 {
                font-size: 1.8rem;
                margin-bottom: 5px;
            }

            .header p {
                font-size: 0.9rem;
            }

            .content {
                padding: 20px 15px;
            }

            .step-indicator {
                margin-bottom: 20px;
                gap: 8px;
            }

            .step {
                padding: 10px 8px;
                font-size: 0.7rem;
                min-width: 70px;
                border-radius: 6px;
            }

            .section-title {
                font-size: 1.4rem;
                margin-bottom: 20px;
            }

            .grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 12px;
                margin-bottom: 20px;
            }

            .card {
                padding: 15px 12px;
                min-height: 110px;
                border-radius: 10px;
            }

            .card-icon {
                font-size: 2rem;
                margin-bottom: 6px;
            }

            .card-title {
                font-size: 0.8rem;
            }

            .doctors-grid {
                gap: 12px;
                margin-bottom: 20px;
            }

            .doctor-header {
                padding: 15px 12px;
            }

            .doctor-avatar {
                font-size: 2.4rem;
                margin-bottom: 8px;
            }

            .doctor-name {
                font-size: 1rem;
                margin-bottom: 3px;
            }

            .doctor-title {
                font-size: 0.75rem;
            }

            .doctor-body {
                padding: 12px 12px;
            }

            .doctor-specialty {
                font-size: 0.85rem;
                margin-bottom: 8px;
                padding: 4px;
            }

            .doctor-info {
                gap: 6px;
                margin-bottom: 8px;
            }

            .info-row {
                font-size: 0.75rem;
                gap: 4px;
            }

            .doctor-rating {
                font-size: 0.85rem;
                margin-bottom: 6px;
            }

            .doctor-badge {
                padding: 3px 8px;
                font-size: 0.7rem;
            }

            .doctor-availability {
                font-size: 0.75rem;
                padding-top: 8px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            .form-group label {
                font-size: 0.9rem;
                margin-bottom: 6px;
            }

            .form-group input,
            .form-group select,
            .form-group textarea {
                padding: 11px 12px;
                font-size: 16px;
                border-radius: 6px;
            }

            .form-row {
                gap: 15px;
            }

            .summary {
                padding: 15px;
                border-radius: 10px;
            }

            .summary-item {
                padding: 10px 0;
                font-size: 0.85rem;
                flex-direction: column;
                text-align: left;
            }

            .summary-value {
                text-align: left;
                margin-left: 0;
                margin-top: 4px;
            }

            .buttons {
                gap: 10px;
                margin-top: 25px;
                flex-direction: column;
            }

            button {
                padding: 11px 20px;
                font-size: 0.9rem;
                min-width: 100%;
                width: 100%;
            }

            .modal-content {
                padding: 25px 20px;
                border-radius: 12px;
                margin: 20px;
            }

            .modal-content h2 {
                font-size: 1.4rem;
                margin-bottom: 12px;
            }

            .modal-content p {
                font-size: 0.9rem;
                margin-bottom: 8px;
            }

            .success-icon {
                font-size: 3rem;
                margin-bottom: 12px;
            }

            .modal-buttons {
                gap: 10px;
                margin-top: 20px;
            }
        }

        @media (max-width: 400px) {
            .home-button {
                padding: 7px 12px;
                font-size: 0.7rem;
            }

            .header h1 {
                font-size: 1.6rem;
            }

            .section-title {
                font-size: 1.3rem;
            }

            .step {
                padding: 8px 6px;
                font-size: 0.65rem;
                min-width: 65px;
            }

            .card-icon {
                font-size: 1.8rem;
            }

            .doctor-avatar {
                font-size: 2.2rem;
            }

            button {
                padding: 10px 18px;
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Bot√≥n de Inicio (Visible siempre) -->
    <a href="index.html" class="home-button">üè† Inicio</a>

    <div class="container">
        <div class="header">
            <h1>üè• Cl√≠nica M√©dica</h1>
            <p>Agendamiento de Citas</p>
        </div>

        <div class="content">
            <!-- Indicadores de Pasos -->
            <div class="step-indicator">
                <div class="step active" data-step="1">1. Esp.</div>
                <div class="step" data-step="2">2. Prof.</div>
                <div class="step" data-step="3">3. Fecha</div>
                <div class="step" data-step="4">4. Datos</div>
                <div class="step" data-step="5">5. Conf.</div>
            </div>

            <!-- PASO 1: Especialidades -->
            <div class="form-section visible" id="step-1">
                <h2 class="section-title">Especialidad</h2>
                <div class="grid" id="specialties-container">
                    <!-- Las especialidades se cargar√°n aqu√≠ -->
                </div>
            </div>

            <!-- PASO 2: Doctores -->
            <div class="form-section" id="step-2">
                <h2 class="section-title">Profesional</h2>
                <div class="doctors-grid" id="doctors-container">
                    <!-- Los doctores se cargar√°n aqu√≠ -->
                </div>
            </div>

            <!-- PASO 3: Fecha y Hora -->
            <div class="form-section" id="step-3">
                <h2 class="section-title">Fecha y Hora</h2>
                <div class="form-group">
                    <label for="appointment-date">üìÖ Fecha:</label>
                    <input type="date" id="appointment-date" required>
                </div>
                <div class="form-group">
                    <label>‚è∞ Horarios:</label>
                    <div class="grid" id="times-container">
                        <!-- Los horarios se cargar√°n aqu√≠ -->
                    </div>
                </div>
            </div>

            <!-- PASO 4: Datos Personales -->
            <div class="form-section" id="step-4">
                <h2 class="section-title">Datos Personales</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="full-name">Nombre *</label>
                        <input type="text" id="full-name" placeholder="Juan P√©rez" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="rut">RUT *</label>
                        <input type="text" id="rut" placeholder="12.345.678-9" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" id="email" placeholder="correo@ejemplo.com" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="phone">Tel√©fono *</label>
                        <input type="tel" id="phone" placeholder="+56 9 1234 5678" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="birthdate">Nacimiento *</label>
                        <input type="date" id="birthdate" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="gender">G√©nero *</label>
                        <select id="gender" required>
                            <option value="">Seleccione...</option>
                            <option value="M">Masculino</option>
                            <option value="F">Femenino</option>
                            <option value="O">Otro</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="reason">Motivo (Opcional)</label>
                        <textarea id="reason" rows="3" placeholder="Describa el motivo..."></textarea>
                    </div>
                </div>
            </div>

            <!-- PASO 5: Confirmaci√≥n -->
            <div class="form-section" id="step-5">
                <h2 class="section-title">Confirmaci√≥n</h2>
                <div class="summary" id="summary-container">
                    <!-- El resumen se mostrar√° aqu√≠ -->
                </div>
            </div>

            <!-- Botones de Navegaci√≥n -->
            <div class="buttons">
                <button class="btn-secondary" id="btn-prev" style="display:none;" onclick="previousStep()">‚Üê Atr√°s</button>
                <button class="btn-primary" id="btn-next" onclick="nextStep()">Siguiente ‚Üí</button>
                <button class="btn-success" id="btn-submit" style="display:none;" onclick="submitAppointment()">‚úì Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Modal de √âxito -->
    <div class="modal" id="success-modal">
        <div class="modal-content">
            <span class="success-icon">‚úÖ</span>
            <h2>¬°Cita Agendada!</h2>
            <p id="modal-message"></p>
            <div class="modal-buttons">
                <button class="btn-primary" onclick="resetForm()">Agendar Otra</button>
                <a href="index.html" style="display: flex; align-items: center; justify-content: center; text-decoration: none;">
                    <button class="btn-secondary" style="width: 100%; margin: 0;">Ir a Inicio</button>
                </a>
            </div>
        </div>
    </div>

    <script>
        // ===== BASE DE DATOS =====
        const specialties = [
            { id: 'odontologia-adultos', name: 'Odontolog√≠a Adultos', icon: 'ü¶∑' },
            { id: 'odontologia-ninos', name: 'Odontolog√≠a Infantil', icon: 'üë∂' },
            { id: 'medicina-general', name: 'Medicina General', icon: 'üè•' },
            { id: 'kinesiologia', name: 'Kinesiolog√≠a', icon: 'üí™' },
            { id: 'psicologia', name: 'Psicolog√≠a', icon: 'üß†' },
            { id: 'nutricion', name: 'Nutrici√≥n', icon: 'ü•ó' },
            { id: 'traumatologia', name: 'Traumatolog√≠a', icon: 'ü¶¥' },
            { id: 'medicina-laboral', name: 'Medicina Laboral', icon: 'üëî' }
        ];

        const doctors = {
            'odontologia-adultos': [
                { name: 'Dr. Carlos Mendoza', specialty: 'Odont√≥logo General', experience: '15 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Senior', certification: 'Certificado' },
                { name: 'Dra. Mar√≠a Gonz√°lez', specialty: 'Periodoncista', experience: '12 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Periodontolog√≠a', certification: 'Certificado' },
                { name: 'Dr. Roberto S√°nchez', specialty: 'Endodoncista', experience: '10 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Endodoncia', certification: 'Certificado' },
                { name: 'Dra. Francisca L√≥pez', specialty: 'Ortodoncista', experience: '11 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Ortodoncia', certification: 'Certificado' },
                { name: 'Dr. Javier Ruiz', specialty: 'Implant√≥logo', experience: '13 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Implantes', certification: 'Certificado' },
                { name: 'Dra. Carmen D√≠az', specialty: 'Odont√≥loga Est√©tica', experience: '9 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Odontolog√≠a Est√©tica', certification: 'Certificado' }
            ],
            'odontologia-ninos': [
                { name: 'Dra. Patricia Valenzuela', specialty: 'Odontopediatra', experience: '18 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Senior Infantil', certification: 'Certificado' },
                { name: 'Dra. Andrea Rojas', specialty: 'Odontopediatra', experience: '8 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Infantil', certification: 'Certificado' },
                { name: 'Dra. Sof√≠a Campos', specialty: 'Odontopediatra', experience: '6 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Pedi√°trica', certification: 'Certificado' },
                { name: 'Dr. Miguel Herrera', specialty: 'Odontopediatra', experience: '7 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Infantil', certification: 'Certificado' }
            ],
            'medicina-general': [
                { name: 'Dr. Juan Pablo Mart√≠nez', specialty: 'M√©dico General', experience: '20 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'M√©dico General Consultor', certification: 'Certificado' },
                { name: 'Dra. Claudia Fern√°ndez', specialty: 'M√©dico Internista', experience: '14 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Medicina Interna', certification: 'Certificado' },
                { name: 'Dr. Luis Garc√≠a', specialty: 'M√©dico General', experience: '11 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'M√©dico de Familia', certification: 'Certificado' },
                { name: 'Dra. Elena Morales', specialty: 'M√©dico General', experience: '9 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'M√©dica General', certification: 'Certificado' }
            ],
            'kinesiologia': [
                { name: 'Lic. Sebasti√°n Torres', specialty: 'Kinesi√≥logo Deportivo', experience: '10 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Kinesiolog√≠a Deportiva', certification: 'Certificado' },
                { name: 'Lic. Valentina Cort√©s', specialty: 'Kinesi√≥loga Rehabilitaci√≥n', experience: '7 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Rehabilitaci√≥n', certification: 'Certificado' },
                { name: 'Lic. Diego Fuentes', specialty: 'Kinesi√≥logo Cl√≠nico', experience: '8 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Cl√≠nico', certification: 'Certificado' },
                { name: 'Lic. Roxana Silva', specialty: 'Kinesi√≥loga Pedi√°trica', experience: '6 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Pedi√°trica', certification: 'Certificado' }
            ],
            'psicologia': [
                { name: 'Ps. Rodrigo Vargas', specialty: 'Psic√≥logo Cl√≠nico', experience: '12 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Psic√≥logo Cl√≠nico Senior', certification: 'Certificado' },
                { name: 'Ps. Carolina Espinoza', specialty: 'Psic√≥loga Familiar', experience: '9 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Terapia Familiar', certification: 'Certificado' },
                { name: 'Ps. Marco Antonio L√≥pez', specialty: 'Psic√≥logo Organizacional', experience: '11 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Organizacional', certification: 'Certificado' },
                { name: 'Ps. Daniela Romero', specialty: 'Psic√≥loga Infantil', experience: '7 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Infantil', certification: 'Certificado' }
            ],
            'nutricion': [
                { name: 'Nut. Daniela Morales', specialty: 'Nutricionista Cl√≠nica', experience: '8 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Nutricionista Cl√≠nica Senior', certification: 'Certificado' },
                { name: 'Nut. Felipe Ram√≠rez', specialty: 'Nutricionista Deportivo', experience: '6 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista en Nutrici√≥n Deportiva', certification: 'Certificado' },
                { name: 'Nut. Javiera Concha', specialty: 'Nutricionista Cl√≠nica', experience: '7 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Nutricionista Cl√≠nica', certification: 'Certificado' },
                { name: 'Nut. Andr√©s Mu√±oz', specialty: 'Nutricionista Infantil', experience: '5 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Pedi√°trico', certification: 'Certificado' }
            ],
            'traumatologia': [
                { name: 'Dr. Andr√©s Bustos', specialty: 'Traumat√≥logo', experience: '16 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Traumat√≥logo Senior', certification: 'Certificado' },
                { name: 'Dr. Esteban Parra', specialty: 'Traumat√≥logo Deportivo', experience: '11 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Deportivo', certification: 'Certificado' },
                { name: 'Dr. Rafael Guti√©rrez', specialty: 'Traumat√≥logo', experience: '13 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Traumat√≥logo Consultor', certification: 'Certificado' },
                { name: 'Dra. Ver√≥nica Navarro', specialty: 'Traumat√≥loga', experience: '9 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Traumat√≥loga', certification: 'Certificado' }
            ],
            'medicina-laboral': [
                { name: 'Dr. Luis Herrera', specialty: 'M√©dico Laboral', experience: '13 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê', title: 'M√©dico Laboral Senior', certification: 'Certificado' },
                { name: 'Dra. Beatriz Cort√©s', specialty: 'M√©dica Laboral', experience: '10 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'M√©dica Laboral', certification: 'Certificado' },
                { name: 'Dr. Fernando Soto', specialty: 'M√©dico Ocupacional', experience: '12 a√±os', rating: '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê', title: 'Especialista Ocupacional', certification: 'Certificado' }
            ]
        };

        const timeSlots = [
            '09:00', '09:30', '10:00', '10:30', '11:00', '11:30',
            '12:00', '12:30', '14:00', '14:30', '15:00', '15:30',
            '16:00', '16:30', '17:00', '17:30', '18:00'
        ];

        let currentStep = 1;
        let appointmentData = {
            specialty: null,
            specialtyName: null,
            doctor: null,
            date: null,
            time: null,
            patient: {}
        };

        document.addEventListener('DOMContentLoaded', function() {
            loadSpecialties();
            setupDatePicker();
        });

        function setupDatePicker() {
            const dateInput = document.getElementById('appointment-date');
            const today = new Date().toISOString().split('T')[0];
            const maxDate = new Date();
            maxDate.setMonth(maxDate.getMonth() + 3);
            dateInput.setAttribute('min', today);
            dateInput.setAttribute('max', maxDate.toISOString().split('T')[0]);
        }

        function loadSpecialties() {
            const container = document.getElementById('specialties-container');
            container.innerHTML = '';
            specialties.forEach(spec => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `<span class="card-icon">${spec.icon}</span><div class="card-title">${spec.name}</div>`;
                card.onclick = () => selectSpecialty(spec, card);
                container.appendChild(card);
            });
        }

        function selectSpecialty(spec, element) {
            appointmentData.specialty = spec.id;
            appointmentData.specialtyName = spec.name;
            document.querySelectorAll('#specialties-container .card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
        }

        function loadDoctors() {
            const container = document.getElementById('doctors-container');
            container.innerHTML = '';
            const doctorList = doctors[appointmentData.specialty] || [];
            doctorList.forEach((doc) => {
                const card = document.createElement('div');
                card.className = 'doctor-card';
                card.innerHTML = `<div class="doctor-header"><div class="doctor-avatar">üë®‚Äç‚öïÔ∏è</div><div class="doctor-name">${doc.name}</div><div class="doctor-title">${doc.title}</div></div><div class="doctor-body"><div class="doctor-specialty">${doc.specialty}</div><div class="doctor-info"><div class="info-row"><span class="info-icon">üìÖ</span><span>${doc.experience}</span></div><div class="doctor-rating">${doc.rating}</div><div class="doctor-badge">${doc.certification}</div></div><div class="doctor-availability">‚úì Disponible</div></div>`;
                card.onclick = () => selectDoctor(doc, card);
                container.appendChild(card);
            });
        }

        function selectDoctor(doc, element) {
            appointmentData.doctor = doc;
            document.querySelectorAll('#doctors-container .doctor-card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
        }

        function loadTimeSlots() {
            const container = document.getElementById('times-container');
            container.innerHTML = '';
            timeSlots.forEach(time => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = time;
                card.onclick = () => selectTime(time, card);
                container.appendChild(card);
            });
        }

        function selectTime(time, element) {
            appointmentData.time = time;
            document.querySelectorAll('#times-container .card').forEach(c => c.classList.remove('selected'));
            element.classList.add('selected');
        }

        function nextStep() {
            if (!validateStep(currentStep)) return;
            if (currentStep < 5) {
                currentStep++;
                updateDisplay();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateDisplay();
            }
        }

        function updateDisplay() {
            document.querySelectorAll('.form-section').forEach(section => {
                section.classList.remove('visible');
            });
            const activeSection = document.getElementById('step-' + currentStep);
            if (activeSection) activeSection.classList.add('visible');
            
            document.querySelectorAll('.step-indicator .step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                const stepNum = index + 1;
                if (stepNum < currentStep) step.classList.add('completed');
                else if (stepNum === currentStep) step.classList.add('active');
            });
            
            document.getElementById('btn-prev').style.display = currentStep > 1 ? 'block' : 'none';
            document.getElementById('btn-next').style.display = currentStep < 5 ? 'block' : 'none';
            document.getElementById('btn-submit').style.display = currentStep === 5 ? 'block' : 'none';
            
            if (currentStep === 2) loadDoctors();
            else if (currentStep === 3) loadTimeSlots();
            else if (currentStep === 5) showSummary();
            
            window.scrollTo(0, 0);
        }

        function validateStep(step) {
            switch(step) {
                case 1:
                    if (!appointmentData.specialty) { alert('Seleccione especialidad'); return false; }
                    return true;
                case 2:
                    if (!appointmentData.doctor) { alert('Seleccione doctor'); return false; }
                    return true;
                case 3:
                    appointmentData.date = document.getElementById('appointment-date').value;
                    if (!appointmentData.date || !appointmentData.time) { alert('Seleccione fecha y hora'); return false; }
                    return true;
                case 4:
                    const fullName = document.getElementById('full-name').value;
                    const email = document.getElementById('email').value;
                    const phone = document.getElementById('phone').value;
                    const rut = document.getElementById('rut').value;
                    const birthdate = document.getElementById('birthdate').value;
                    const gender = document.getElementById('gender').value;
                    if (!fullName || !email || !phone || !rut || !birthdate || !gender) {
                        alert('Complete todos los campos');
                        return false;
                    }
                    appointmentData.patient = { fullName, email, phone, rut, birthdate, gender, reason: document.getElementById('reason').value };
                    return true;
                default:
                    return true;
            }
        }

        function showSummary() {
            const container = document.getElementById('summary-container');
            const formatDate = (dateStr) => {
                const date = new Date(dateStr + 'T00:00:00');
                return date.toLocaleDateString('es-CL', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
            };
            container.innerHTML = `<div class="summary-item"><span class="summary-label">Especialidad:</span><span class="summary-value">${appointmentData.specialtyName}</span></div><div class="summary-item"><span class="summary-label">Profesional:</span><span class="summary-value">${appointmentData.doctor.name}</span></div><div class="summary-item"><span class="summary-label">Especialidad:</span><span class="summary-value">${appointmentData.doctor.specialty}</span></div><div class="summary-item"><span class="summary-label">Fecha:</span><span class="summary-value">${formatDate(appointmentData.date)}</span></div><div class="summary-item"><span class="summary-label">Hora:</span><span class="summary-value">${appointmentData.time}</span></div><div class="summary-item"><span class="summary-label">Paciente:</span><span class="summary-value">${appointmentData.patient.fullName}</span></div><div class="summary-item"><span class="summary-label">Email:</span><span class="summary-value">${appointmentData.patient.email}</span></div><div class="summary-item"><span class="summary-label">Tel√©fono:</span><span class="summary-value">${appointmentData.patient.phone}</span></div>`;
        }

        function submitAppointment() {
            const modal = document.getElementById('success-modal');
            const message = document.getElementById('modal-message');
            message.innerHTML = `<strong>${appointmentData.specialtyName}</strong><br>Profesional: ${appointmentData.doctor.name}<br><br>üìÖ ${new Date(appointmentData.date + 'T00:00:00').toLocaleDateString('es-CL')} a las ${appointmentData.time}<br><br>Confirmaci√≥n enviada a:<br><strong>${appointmentData.patient.email}</strong>`;
            modal.classList.add('show');
        }

        function resetForm() {
            currentStep = 1;
            appointmentData = { specialty: null, specialtyName: null, doctor: null, date: null, time: null, patient: {} };
            document.getElementById('appointment-date').value = '';
            document.getElementById('full-name').value = '';
            document.getElementById('rut').value = '';
            document.getElementById('email').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('birthdate').value = '';
            document.getElementById('gender').value = '';
            document.getElementById('reason').value = '';
            document.getElementById('success-modal').classList.remove('show');
            updateDisplay();
        }
    </script>
</body>
</html>
